import{r as nn,j as W}from"./index-1ea85c40.js";import{a as bn,C as nt,O as tt}from"./OrbitControls-f2d0a94d.js";import{as as it,V as et,q as rt,a2 as ot,a7 as ut,C as xn,H as lt}from"./three.module-d13e5444.js";import{P as ft}from"./PerspectiveCamera-395b12dd.js";import"./extends-98964cd2.js";const at="map-1EgHT",ct="tooltip-0NsxX",An={map:at,tooltip:ct};class st{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const a=e[r],c=t+a,f=Math.abs(t)<Math.abs(a)?t-(c-a):a-(c-t);f&&(e[i++]=f),t=c}return e[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let e=this._n,i,r,a,c=0;if(e>0){for(c=t[--e];e>0&&(i=c,r=t[--e],c=i+r,a=r-(c-i),!a););e>0&&(a<0&&t[e-1]<0||a>0&&t[e-1]>0)&&(r=a*2,i=c+r,r==i-c&&(c=i))}return c}}function*pt(n){for(const t of n)yield*t}function Jn(n){return Array.from(pt(n))}var T=1e-6,ht=1e-12,C=Math.PI,X=C/2,Tn=C/4,Y=C*2,$=180/C,H=C/180,z=Math.abs,_n=Math.atan,rn=Math.atan2,B=Math.cos,vt=Math.exp,gt=Math.log,G=Math.sin,St=Math.sign||function(n){return n>0?1:n<0?-1:0},En=Math.sqrt,Et=Math.tan;function dt(n){return n>1?0:n<-1?C:Math.acos(n)}function on(n){return n>1?X:n<-1?-X:Math.asin(n)}function tn(){}function hn(n,t){n&&zn.hasOwnProperty(n.type)&&zn[n.type](n,t)}var On={Feature:function(n,t){hn(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,i=-1,r=e.length;++i<r;)hn(e[i].geometry,t)}},zn={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)n=e[i],t.point(n[0],n[1],n[2])},LineString:function(n,t){wn(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)wn(e[i],t,0)},Polygon:function(n,t){Dn(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)Dn(e[i],t)},GeometryCollection:function(n,t){for(var e=n.geometries,i=-1,r=e.length;++i<r;)hn(e[i],t)}};function wn(n,t,e){var i=-1,r=n.length-e,a;for(t.lineStart();++i<r;)a=n[i],t.point(a[0],a[1],a[2]);t.lineEnd()}function Dn(n,t){var e=-1,i=n.length;for(t.polygonStart();++e<i;)wn(n[e],t,1);t.polygonEnd()}function yt(n,t){n&&On.hasOwnProperty(n.type)?On[n.type](n,t):hn(n,t)}function mn(n){return[rn(n[1],n[0]),on(n[2])]}function Z(n){var t=n[0],e=n[1],i=B(e);return[i*B(t),i*G(t),G(e)]}function fn(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function vn(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function dn(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function an(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function Mn(n){var t=En(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function Pn(n,t){function e(i,r){return i=n(i,r),t(i[0],i[1])}return n.invert&&t.invert&&(e.invert=function(i,r){return i=t.invert(i,r),i&&n.invert(i[0],i[1])}),e}function Rn(n,t){return z(n)>C&&(n-=Math.round(n/Y)*Y),[n,t]}Rn.invert=Rn;function Kn(n,t,e){return(n%=Y)?t||e?Pn(Gn(n),Hn(t,e)):Gn(n):t||e?Hn(t,e):Rn}function Bn(n){return function(t,e){return t+=n,z(t)>C&&(t-=Math.round(t/Y)*Y),[t,e]}}function Gn(n){var t=Bn(n);return t.invert=Bn(-n),t}function Hn(n,t){var e=B(n),i=G(n),r=B(t),a=G(t);function c(f,g){var v=B(g),o=B(f)*v,u=G(f)*v,l=G(g),p=l*e+o*i;return[rn(u*r-p*a,o*e-l*i),on(p*r+u*a)]}return c.invert=function(f,g){var v=B(g),o=B(f)*v,u=G(f)*v,l=G(g),p=l*r-u*a;return[rn(u*r+l*a,o*e+p*i),on(p*e-o*i)]},c}function wt(n){n=Kn(n[0]*H,n[1]*H,n.length>2?n[2]*H:0);function t(e){return e=n(e[0]*H,e[1]*H),e[0]*=$,e[1]*=$,e}return t.invert=function(e){return e=n.invert(e[0]*H,e[1]*H),e[0]*=$,e[1]*=$,e},t}function mt(n,t,e,i,r,a){if(e){var c=B(t),f=G(t),g=i*e;r==null?(r=t+i*Y,a=t-g/2):(r=jn(c,r),a=jn(c,a),(i>0?r<a:r>a)&&(r+=i*Y));for(var v,o=r;i>0?o>a:o<a;o-=g)v=mn([c,-f*B(o),-f*G(o)]),n.point(v[0],v[1])}}function jn(n,t){t=Z(t),t[0]-=n,Mn(t);var e=dt(-t[1]);return((-t[2]<0?-e:e)+Y-T)%Y}function Qn(){var n=[],t;return{point:function(e,i,r){t.push([e,i,r])},lineStart:function(){n.push(t=[])},lineEnd:tn,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}function pn(n,t){return z(n[0]-t[0])<T&&z(n[1]-t[1])<T}function cn(n,t,e,i){this.x=n,this.z=t,this.o=e,this.e=i,this.v=!1,this.n=this.p=null}function Un(n,t,e,i,r){var a=[],c=[],f,g;if(n.forEach(function(h){if(!((y=h.length-1)<=0)){var y,S=h[0],R=h[y],d;if(pn(S,R)){if(!S[2]&&!R[2]){for(r.lineStart(),f=0;f<y;++f)r.point((S=h[f])[0],S[1]);r.lineEnd();return}R[0]+=2*T}a.push(d=new cn(S,h,null,!0)),c.push(d.o=new cn(S,null,d,!1)),a.push(d=new cn(R,h,null,!1)),c.push(d.o=new cn(R,null,d,!0))}}),!!a.length){for(c.sort(t),qn(a),qn(c),f=0,g=c.length;f<g;++f)c[f].e=e=!e;for(var v=a[0],o,u;;){for(var l=v,p=!0;l.v;)if((l=l.n)===v)return;o=l.z,r.lineStart();do{if(l.v=l.o.v=!0,l.e){if(p)for(f=0,g=o.length;f<g;++f)r.point((u=o[f])[0],u[1]);else i(l.x,l.n.x,1,r);l=l.n}else{if(p)for(o=l.p.z,f=o.length-1;f>=0;--f)r.point((u=o[f])[0],u[1]);else i(l.x,l.p.x,-1,r);l=l.p}l=l.o,o=l.z,p=!p}while(!l.v);r.lineEnd()}}}function qn(n){if(t=n.length){for(var t,e=0,i=n[0],r;++e<t;)i.n=r=n[e],r.p=i,i=r;i.n=r=n[0],r.p=i}}function yn(n){return z(n[0])<=C?n[0]:St(n[0])*((z(n[0])+C)%Y-C)}function Mt(n,t){var e=yn(t),i=t[1],r=G(i),a=[G(e),-B(e),0],c=0,f=0,g=new st;r===1?i=X+T:r===-1&&(i=-X-T);for(var v=0,o=n.length;v<o;++v)if(l=(u=n[v]).length)for(var u,l,p=u[l-1],h=yn(p),y=p[1]/2+Tn,S=G(y),R=B(y),d=0;d<l;++d,h=E,S=P,R=x,p=w){var w=u[d],E=yn(w),m=w[1]/2+Tn,P=G(m),x=B(m),I=E-h,L=I>=0?1:-1,O=L*I,M=O>C,q=S*P;if(g.add(rn(q*L*G(O),R*x+q*B(O))),c+=M?I+L*Y:I,M^h>=e^E>=e){var D=vn(Z(p),Z(w));Mn(D);var A=vn(a,D);Mn(A);var s=(M^I>=0?-1:1)*on(A[2]);(i>s||i===s&&(D[0]||D[1]))&&(f+=M^I>=0?1:-1)}}return(c<-T||c<T&&g<-ht)^f&1}function Zn(n,t,e,i){return function(r){var a=t(r),c=Qn(),f=t(c),g=!1,v,o,u,l={point:p,lineStart:y,lineEnd:S,polygonStart:function(){l.point=R,l.lineStart=d,l.lineEnd=w,o=[],v=[]},polygonEnd:function(){l.point=p,l.lineStart=y,l.lineEnd=S,o=Jn(o);var E=Mt(v,i);o.length?(g||(r.polygonStart(),g=!0),Un(o,Rt,E,e,r)):E&&(g||(r.polygonStart(),g=!0),r.lineStart(),e(null,null,1,r),r.lineEnd()),g&&(r.polygonEnd(),g=!1),o=v=null},sphere:function(){r.polygonStart(),r.lineStart(),e(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function p(E,m){n(E,m)&&r.point(E,m)}function h(E,m){a.point(E,m)}function y(){l.point=h,a.lineStart()}function S(){l.point=p,a.lineEnd()}function R(E,m){u.push([E,m]),f.point(E,m)}function d(){f.lineStart(),u=[]}function w(){R(u[0][0],u[0][1]),f.lineEnd();var E=f.clean(),m=c.result(),P,x=m.length,I,L,O;if(u.pop(),v.push(u),u=null,!!x){if(E&1){if(L=m[0],(I=L.length-1)>0){for(g||(r.polygonStart(),g=!0),r.lineStart(),P=0;P<I;++P)r.point((O=L[P])[0],O[1]);r.lineEnd()}return}x>1&&E&2&&m.push(m.pop().concat(m.shift())),o.push(m.filter(Pt))}}return l}}function Pt(n){return n.length>1}function Rt(n,t){return((n=n.x)[0]<0?n[1]-X-T:X-n[1])-((t=t.x)[0]<0?t[1]-X-T:X-t[1])}const Fn=Zn(function(){return!0},Nt,It,[-C,-X]);function Nt(n){var t=NaN,e=NaN,i=NaN,r;return{lineStart:function(){n.lineStart(),r=1},point:function(a,c){var f=a>0?C:-C,g=z(a-t);z(g-C)<T?(n.point(t,e=(e+c)/2>0?X:-X),n.point(i,e),n.lineEnd(),n.lineStart(),n.point(f,e),n.point(a,e),r=0):i!==f&&g>=C&&(z(t-i)<T&&(t-=i*T),z(a-f)<T&&(a-=f*T),e=Ct(t,e,a,c),n.point(i,e),n.lineEnd(),n.lineStart(),n.point(f,e),r=0),n.point(t=a,e=c),i=f},lineEnd:function(){n.lineEnd(),t=e=NaN},clean:function(){return 2-r}}}function Ct(n,t,e,i){var r,a,c=G(n-e);return z(c)>T?_n((G(t)*(a=B(i))*G(e)-G(i)*(r=B(t))*G(n))/(r*a*c)):(t+i)/2}function It(n,t,e,i){var r;if(n==null)r=e*X,i.point(-C,r),i.point(0,r),i.point(C,r),i.point(C,0),i.point(C,-r),i.point(0,-r),i.point(-C,-r),i.point(-C,0),i.point(-C,r);else if(z(n[0]-t[0])>T){var a=n[0]<t[0]?C:-C;r=e*a/2,i.point(-a,r),i.point(0,r),i.point(a,r)}else i.point(t[0],t[1])}function Lt(n){var t=B(n),e=6*H,i=t>0,r=z(t)>T;function a(o,u,l,p){mt(p,n,e,l,o,u)}function c(o,u){return B(o)*B(u)>t}function f(o){var u,l,p,h,y;return{lineStart:function(){h=p=!1,y=1},point:function(S,R){var d=[S,R],w,E=c(S,R),m=i?E?0:v(S,R):E?v(S+(S<0?C:-C),R):0;if(!u&&(h=p=E)&&o.lineStart(),E!==p&&(w=g(u,d),(!w||pn(u,w)||pn(d,w))&&(d[2]=1)),E!==p)y=0,E?(o.lineStart(),w=g(d,u),o.point(w[0],w[1])):(w=g(u,d),o.point(w[0],w[1],2),o.lineEnd()),u=w;else if(r&&u&&i^E){var P;!(m&l)&&(P=g(d,u,!0))&&(y=0,i?(o.lineStart(),o.point(P[0][0],P[0][1]),o.point(P[1][0],P[1][1]),o.lineEnd()):(o.point(P[1][0],P[1][1]),o.lineEnd(),o.lineStart(),o.point(P[0][0],P[0][1],3)))}E&&(!u||!pn(u,d))&&o.point(d[0],d[1]),u=d,p=E,l=m},lineEnd:function(){p&&o.lineEnd(),u=null},clean:function(){return y|(h&&p)<<1}}}function g(o,u,l){var p=Z(o),h=Z(u),y=[1,0,0],S=vn(p,h),R=fn(S,S),d=S[0],w=R-d*d;if(!w)return!l&&o;var E=t*R/w,m=-t*d/w,P=vn(y,S),x=an(y,E),I=an(S,m);dn(x,I);var L=P,O=fn(x,L),M=fn(L,L),q=O*O-M*(fn(x,x)-1);if(!(q<0)){var D=En(q),A=an(L,(-O-D)/M);if(dn(A,x),A=mn(A),!l)return A;var s=o[0],N=u[0],j=o[1],F=u[1],V;N<s&&(V=s,s=N,N=V);var b=N-s,J=z(b-C)<T,K=J||b<T;if(!J&&F<j&&(V=j,j=F,F=V),K?J?j+F>0^A[1]<(z(A[0]-s)<T?j:F):j<=A[1]&&A[1]<=F:b>C^(s<=A[0]&&A[0]<=N)){var _=an(L,(-O+D)/M);return dn(_,x),[A,mn(_)]}}}function v(o,u){var l=i?n:C-n,p=0;return o<-l?p|=1:o>l&&(p|=2),u<-l?p|=4:u>l&&(p|=8),p}return Zn(c,f,a,i?[0,-n]:[-C,n-C])}function xt(n,t,e,i,r,a){var c=n[0],f=n[1],g=t[0],v=t[1],o=0,u=1,l=g-c,p=v-f,h;if(h=e-c,!(!l&&h>0)){if(h/=l,l<0){if(h<o)return;h<u&&(u=h)}else if(l>0){if(h>u)return;h>o&&(o=h)}if(h=r-c,!(!l&&h<0)){if(h/=l,l<0){if(h>u)return;h>o&&(o=h)}else if(l>0){if(h<o)return;h<u&&(u=h)}if(h=i-f,!(!p&&h>0)){if(h/=p,p<0){if(h<o)return;h<u&&(u=h)}else if(p>0){if(h>u)return;h>o&&(o=h)}if(h=a-f,!(!p&&h<0)){if(h/=p,p<0){if(h>u)return;h>o&&(o=h)}else if(p>0){if(h<o)return;h<u&&(u=h)}return o>0&&(n[0]=c+o*l,n[1]=f+o*p),u<1&&(t[0]=c+u*l,t[1]=f+u*p),!0}}}}}var en=1e9,sn=-en;function At(n,t,e,i){function r(v,o){return n<=v&&v<=e&&t<=o&&o<=i}function a(v,o,u,l){var p=0,h=0;if(v==null||(p=c(v,u))!==(h=c(o,u))||g(v,o)<0^u>0)do l.point(p===0||p===3?n:e,p>1?i:t);while((p=(p+u+4)%4)!==h);else l.point(o[0],o[1])}function c(v,o){return z(v[0]-n)<T?o>0?0:3:z(v[0]-e)<T?o>0?2:1:z(v[1]-t)<T?o>0?1:0:o>0?3:2}function f(v,o){return g(v.x,o.x)}function g(v,o){var u=c(v,1),l=c(o,1);return u!==l?u-l:u===0?o[1]-v[1]:u===1?v[0]-o[0]:u===2?v[1]-o[1]:o[0]-v[0]}return function(v){var o=v,u=Qn(),l,p,h,y,S,R,d,w,E,m,P,x={point:I,lineStart:q,lineEnd:D,polygonStart:O,polygonEnd:M};function I(s,N){r(s,N)&&o.point(s,N)}function L(){for(var s=0,N=0,j=p.length;N<j;++N)for(var F=p[N],V=1,b=F.length,J=F[0],K,_,ln=J[0],Q=J[1];V<b;++V)K=ln,_=Q,J=F[V],ln=J[0],Q=J[1],_<=i?Q>i&&(ln-K)*(i-_)>(Q-_)*(n-K)&&++s:Q<=i&&(ln-K)*(i-_)<(Q-_)*(n-K)&&--s;return s}function O(){o=u,l=[],p=[],P=!0}function M(){var s=L(),N=P&&s,j=(l=Jn(l)).length;(N||j)&&(v.polygonStart(),N&&(v.lineStart(),a(null,null,1,v),v.lineEnd()),j&&Un(l,f,s,a,v),v.polygonEnd()),o=v,l=p=h=null}function q(){x.point=A,p&&p.push(h=[]),m=!0,E=!1,d=w=NaN}function D(){l&&(A(y,S),R&&E&&u.rejoin(),l.push(u.result())),x.point=I,E&&o.lineEnd()}function A(s,N){var j=r(s,N);if(p&&h.push([s,N]),m)y=s,S=N,R=j,m=!1,j&&(o.lineStart(),o.point(s,N));else if(j&&E)o.point(s,N);else{var F=[d=Math.max(sn,Math.min(en,d)),w=Math.max(sn,Math.min(en,w))],V=[s=Math.max(sn,Math.min(en,s)),N=Math.max(sn,Math.min(en,N))];xt(F,V,n,t,e,i)?(E||(o.lineStart(),o.point(F[0],F[1])),o.point(V[0],V[1]),j||o.lineEnd(),P=!1):j&&(o.lineStart(),o.point(s,N),P=!1)}d=s,w=N,E=j}return x}}const Wn=n=>n;var k=1/0,gn=k,un=-k,Sn=un,Tt={point:Ot,lineStart:tn,lineEnd:tn,polygonStart:tn,polygonEnd:tn,result:function(){var n=[[k,gn],[un,Sn]];return un=Sn=-(gn=k=1/0),n}};function Ot(n,t){n<k&&(k=n),n>un&&(un=n),t<gn&&(gn=t),t>Sn&&(Sn=t)}const Xn=Tt;function Cn(n){return function(t){var e=new Nn;for(var i in n)e[i]=n[i];return e.stream=t,e}}function Nn(){}Nn.prototype={constructor:Nn,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function In(n,t,e){var i=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),i!=null&&n.clipExtent(null),yt(e,n.stream(Xn)),t(Xn.result()),i!=null&&n.clipExtent(i),n}function kn(n,t,e){return In(n,function(i){var r=t[1][0]-t[0][0],a=t[1][1]-t[0][1],c=Math.min(r/(i[1][0]-i[0][0]),a/(i[1][1]-i[0][1])),f=+t[0][0]+(r-c*(i[1][0]+i[0][0]))/2,g=+t[0][1]+(a-c*(i[1][1]+i[0][1]))/2;n.scale(150*c).translate([f,g])},e)}function zt(n,t,e){return kn(n,[[0,0],t],e)}function Dt(n,t,e){return In(n,function(i){var r=+t,a=r/(i[1][0]-i[0][0]),c=(r-a*(i[1][0]+i[0][0]))/2,f=-a*i[0][1];n.scale(150*a).translate([c,f])},e)}function Bt(n,t,e){return In(n,function(i){var r=+t,a=r/(i[1][1]-i[0][1]),c=-a*i[0][0],f=(r-a*(i[1][1]+i[0][1]))/2;n.scale(150*a).translate([c,f])},e)}var $n=16,Gt=B(30*H);function Vn(n,t){return+t?jt(n,t):Ht(n)}function Ht(n){return Cn({point:function(t,e){t=n(t,e),this.stream.point(t[0],t[1])}})}function jt(n,t){function e(i,r,a,c,f,g,v,o,u,l,p,h,y,S){var R=v-i,d=o-r,w=R*R+d*d;if(w>4*t&&y--){var E=c+l,m=f+p,P=g+h,x=En(E*E+m*m+P*P),I=on(P/=x),L=z(z(P)-1)<T||z(a-u)<T?(a+u)/2:rn(m,E),O=n(L,I),M=O[0],q=O[1],D=M-i,A=q-r,s=d*D-R*A;(s*s/w>t||z((R*D+d*A)/w-.5)>.3||c*l+f*p+g*h<Gt)&&(e(i,r,a,c,f,g,M,q,L,E/=x,m/=x,P,y,S),S.point(M,q),e(M,q,L,E,m,P,v,o,u,l,p,h,y,S))}}return function(i){var r,a,c,f,g,v,o,u,l,p,h,y,S={point:R,lineStart:d,lineEnd:E,polygonStart:function(){i.polygonStart(),S.lineStart=m},polygonEnd:function(){i.polygonEnd(),S.lineStart=d}};function R(I,L){I=n(I,L),i.point(I[0],I[1])}function d(){u=NaN,S.point=w,i.lineStart()}function w(I,L){var O=Z([I,L]),M=n(I,L);e(u,l,o,p,h,y,u=M[0],l=M[1],o=I,p=O[0],h=O[1],y=O[2],$n,i),i.point(u,l)}function E(){S.point=R,i.lineEnd()}function m(){d(),S.point=P,S.lineEnd=x}function P(I,L){w(r=I,L),a=u,c=l,f=p,g=h,v=y,S.point=w}function x(){e(u,l,o,p,h,y,a,c,r,f,g,v,$n,i),S.lineEnd=E,E()}return S}}var qt=Cn({point:function(n,t){this.stream.point(n*H,t*H)}});function Ft(n){return Cn({point:function(t,e){var i=n(t,e);return this.stream.point(i[0],i[1])}})}function Wt(n,t,e,i,r){function a(c,f){return c*=i,f*=r,[t+n*c,e-n*f]}return a.invert=function(c,f){return[(c-t)/n*i,(e-f)/n*r]},a}function Yn(n,t,e,i,r,a){if(!a)return Wt(n,t,e,i,r);var c=B(a),f=G(a),g=c*n,v=f*n,o=c/n,u=f/n,l=(f*e-c*t)/n,p=(f*t+c*e)/n;function h(y,S){return y*=i,S*=r,[g*y-v*S+t,e-v*y-g*S]}return h.invert=function(y,S){return[i*(o*y-u*S+l),r*(p-u*y-o*S)]},h}function Xt(n){return $t(function(){return n})()}function $t(n){var t,e=150,i=480,r=250,a=0,c=0,f=0,g=0,v=0,o,u=0,l=1,p=1,h=null,y=Fn,S=null,R,d,w,E=Wn,m=.5,P,x,I,L,O;function M(s){return I(s[0]*H,s[1]*H)}function q(s){return s=I.invert(s[0],s[1]),s&&[s[0]*$,s[1]*$]}M.stream=function(s){return L&&O===s?L:L=qt(Ft(o)(y(P(E(O=s)))))},M.preclip=function(s){return arguments.length?(y=s,h=void 0,A()):y},M.postclip=function(s){return arguments.length?(E=s,S=R=d=w=null,A()):E},M.clipAngle=function(s){return arguments.length?(y=+s?Lt(h=s*H):(h=null,Fn),A()):h*$},M.clipExtent=function(s){return arguments.length?(E=s==null?(S=R=d=w=null,Wn):At(S=+s[0][0],R=+s[0][1],d=+s[1][0],w=+s[1][1]),A()):S==null?null:[[S,R],[d,w]]},M.scale=function(s){return arguments.length?(e=+s,D()):e},M.translate=function(s){return arguments.length?(i=+s[0],r=+s[1],D()):[i,r]},M.center=function(s){return arguments.length?(a=s[0]%360*H,c=s[1]%360*H,D()):[a*$,c*$]},M.rotate=function(s){return arguments.length?(f=s[0]%360*H,g=s[1]%360*H,v=s.length>2?s[2]%360*H:0,D()):[f*$,g*$,v*$]},M.angle=function(s){return arguments.length?(u=s%360*H,D()):u*$},M.reflectX=function(s){return arguments.length?(l=s?-1:1,D()):l<0},M.reflectY=function(s){return arguments.length?(p=s?-1:1,D()):p<0},M.precision=function(s){return arguments.length?(P=Vn(x,m=s*s),A()):En(m)},M.fitExtent=function(s,N){return kn(M,s,N)},M.fitSize=function(s,N){return zt(M,s,N)},M.fitWidth=function(s,N){return Dt(M,s,N)},M.fitHeight=function(s,N){return Bt(M,s,N)};function D(){var s=Yn(e,0,0,l,p,u).apply(null,t(a,c)),N=Yn(e,i-s[0],r-s[1],l,p,u);return o=Kn(f,g,v),x=Pn(t,N),I=Pn(o,x),P=Vn(x,m),A()}function A(){return L=O=null,M}return function(){return t=n.apply(this,arguments),M.invert=t.invert&&q,D()}}function Ln(n,t){return[n,gt(Et((X+t)/2))]}Ln.invert=function(n,t){return[n,2*_n(vt(t))-X]};function Vt(){return Yt(Ln).scale(961/Y)}function Yt(n){var t=Xt(n),e=t.center,i=t.scale,r=t.translate,a=t.clipExtent,c=null,f,g,v;t.scale=function(u){return arguments.length?(i(u),o()):i()},t.translate=function(u){return arguments.length?(r(u),o()):r()},t.center=function(u){return arguments.length?(e(u),o()):e()},t.clipExtent=function(u){return arguments.length?(u==null?c=f=g=v=null:(c=+u[0][0],f=+u[0][1],g=+u[1][0],v=+u[1][1]),o()):c==null?null:[[c,f],[g,v]]};function o(){var u=C*i(),l=t(wt(t.rotate()).invert([0,0]));return a(c==null?[[l[0]-u,l[1]-u],[l[0]+u,l[1]+u]]:n===Ln?[[Math.max(l[0]-u,c),f],[Math.min(l[0]+u,g),v]]:[[c,Math.max(l[1]-u,f)],[g,Math.min(l[1]+u,v)]])}return o()}function Jt(n){return{all:n=n||new Map,on:function(t,e){var i=n.get(t);i?i.push(e):n.set(t,[e])},off:function(t,e){var i=n.get(t);i&&(e?i.splice(i.indexOf(e)>>>0,1):n.set(t,[]))},emit:function(t,e){var i=n.get(t);i&&i.slice().map(function(r){r(e)}),(i=n.get("*"))&&i.slice().map(function(r){r(t,e)})}}}const U=Jt(),_t=nn.forwardRef((n,t)=>{const{features:e}=n,i=Vt().center([104,37]).scale(9).translate([0,0]),r=f=>{f.object.material[0].color=new xn("#ff0"),U.emit("handleShow",f)},a=f=>{f.object.material[0].color=new xn("#f00"),U.emit("handleCancel")},c=e.map(f=>{const g=f.properties.center!=null;let v=null;if(g){const[u,l]=i(f.properties.center);v={name:f.properties.name,position:[u,-l]}}let o;return f.geometry.type==="Polygon"?o=[f.geometry.coordinates]:o=f.geometry.coordinates,o.map((u,l)=>{const p=new it,h=[];u.map(d=>{d.map((w,E)=>{const[m,P]=i(w);h.push(new et(m,-P,.01)),E?p.lineTo(m,-P):p.moveTo(m,-P)})});const y=new rt().setFromPoints(h),S=new ot({color:"#fff"}),R=new ut(y,S);return W.jsxs("group",{children:[W.jsx("primitive",{object:R}),W.jsxs("mesh",{userData:g&&{center:v},name:f.properties.name,onPointerOut:a,onPointerEnter:r,children:[W.jsx("extrudeGeometry",{args:[p,{depth:-.1,bevelEnabled:!1}]}),W.jsx("meshBasicMaterial",{attach:"material-1",color:"#d13a00",transparent:!0,opacity:.5}),W.jsx("meshBasicMaterial",{attach:"material-0",transparent:!0,color:"#f00",opacity:.9})]})]},l)})});return W.jsx("group",{position:[0,0,0],ref:t,children:c})});console.log(import.meta);const bt=()=>{const n=bn(lt,"/china.json"),t=JSON.parse(n).features,[e,i]=nn.useState(""),[r,a]=nn.useState({x:0,y:0}),c=nn.useRef();return nn.useEffect(()=>(U.on("handleShow",f=>{i(f.object.name),a({x:f.offsetX,y:f.offsetY})}),U.on("handleCancel",()=>{i("")}),()=>{U.off("handleShow"),U.off("handleCancel")}),[c.current]),W.jsxs("div",{id:An.map,children:[W.jsx("div",{id:An.tooltip,style:{left:r.x,top:r.y},children:e}),W.jsxs(nt,{children:[W.jsx(ft,{fov:60,near:1,far:100,aspect:window.innerWidth/window.innerHeight,position:[0,0,100]}),W.jsx(tt,{minDistance:1,maxDistance:10}),W.jsx("ambientLight",{intensity:1,args:["#dedede"]}),W.jsx(_t,{ref:c,features:t})]})]})};export{bt as default};
