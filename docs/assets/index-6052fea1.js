import{r as nn,j as W}from"./index-56dd90bd.js";import{a as bn,C as nt,O as tt}from"./OrbitControls-8a35fedb.js";import{av as it,V as et,B as rt,t as ot,A as ut,C as xn,F as lt}from"./three.module-e72dd0cd.js";import{P as ft}from"./PerspectiveCamera-e9dcea88.js";import"./extends-4c19d496.js";const at="map-1EgHT",ct="tooltip-0NsxX",Ln={map:at,tooltip:ct};class st{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const a=e[r],c=t+a,f=Math.abs(t)<Math.abs(a)?t-(c-a):a-(c-t);f&&(e[i++]=f),t=c}return e[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let e=this._n,i,r,a,c=0;if(e>0){for(c=t[--e];e>0&&(i=c,r=t[--e],c=i+r,a=r-(c-i),!a););e>0&&(a<0&&t[e-1]<0||a>0&&t[e-1]>0)&&(r=a*2,i=c+r,r==i-c&&(c=i))}return c}}function*pt(n){for(const t of n)yield*t}function Jn(n){return Array.from(pt(n))}var z=1e-6,ht=1e-12,A=Math.PI,X=A/2,zn=A/4,Y=A*2,$=180/A,G=A/180,O=Math.abs,_n=Math.atan,rn=Math.atan2,B=Math.cos,vt=Math.exp,gt=Math.log,F=Math.sin,St=Math.sign||function(n){return n>0?1:n<0?-1:0},En=Math.sqrt,Et=Math.tan;function dt(n){return n>1?0:n<-1?A:Math.acos(n)}function on(n){return n>1?X:n<-1?-X:Math.asin(n)}function tn(){}function hn(n,t){n&&On.hasOwnProperty(n.type)&&On[n.type](n,t)}var Tn={Feature:function(n,t){hn(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,i=-1,r=e.length;++i<r;)hn(e[i].geometry,t)}},On={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)n=e[i],t.point(n[0],n[1],n[2])},LineString:function(n,t){yn(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)yn(e[i],t,0)},Polygon:function(n,t){Dn(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)Dn(e[i],t)},GeometryCollection:function(n,t){for(var e=n.geometries,i=-1,r=e.length;++i<r;)hn(e[i],t)}};function yn(n,t,e){var i=-1,r=n.length-e,a;for(t.lineStart();++i<r;)a=n[i],t.point(a[0],a[1],a[2]);t.lineEnd()}function Dn(n,t){var e=-1,i=n.length;for(t.polygonStart();++e<i;)yn(n[e],t,1);t.polygonEnd()}function mt(n,t){n&&Tn.hasOwnProperty(n.type)?Tn[n.type](n,t):hn(n,t)}function Mn(n){return[rn(n[1],n[0]),on(n[2])]}function Z(n){var t=n[0],e=n[1],i=B(e);return[i*B(t),i*F(t),F(e)]}function fn(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function vn(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function dn(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function an(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function wn(n){var t=En(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function Pn(n,t){function e(i,r){return i=n(i,r),t(i[0],i[1])}return n.invert&&t.invert&&(e.invert=function(i,r){return i=t.invert(i,r),i&&n.invert(i[0],i[1])}),e}function Nn(n,t){return O(n)>A&&(n-=Math.round(n/Y)*Y),[n,t]}Nn.invert=Nn;function Kn(n,t,e){return(n%=Y)?t||e?Pn(Fn(n),Gn(t,e)):Fn(n):t||e?Gn(t,e):Nn}function Bn(n){return function(t,e){return t+=n,O(t)>A&&(t-=Math.round(t/Y)*Y),[t,e]}}function Fn(n){var t=Bn(n);return t.invert=Bn(-n),t}function Gn(n,t){var e=B(n),i=F(n),r=B(t),a=F(t);function c(f,g){var v=B(g),o=B(f)*v,u=F(f)*v,l=F(g),p=l*e+o*i;return[rn(u*r-p*a,o*e-l*i),on(p*r+u*a)]}return c.invert=function(f,g){var v=B(g),o=B(f)*v,u=F(f)*v,l=F(g),p=l*r-u*a;return[rn(u*r+l*a,o*e+p*i),on(p*e-o*i)]},c}function yt(n){n=Kn(n[0]*G,n[1]*G,n.length>2?n[2]*G:0);function t(e){return e=n(e[0]*G,e[1]*G),e[0]*=$,e[1]*=$,e}return t.invert=function(e){return e=n.invert(e[0]*G,e[1]*G),e[0]*=$,e[1]*=$,e},t}function Mt(n,t,e,i,r,a){if(e){var c=B(t),f=F(t),g=i*e;r==null?(r=t+i*Y,a=t-g/2):(r=jn(c,r),a=jn(c,a),(i>0?r<a:r>a)&&(r+=i*Y));for(var v,o=r;i>0?o>a:o<a;o-=g)v=Mn([c,-f*B(o),-f*F(o)]),n.point(v[0],v[1])}}function jn(n,t){t=Z(t),t[0]-=n,wn(t);var e=dt(-t[1]);return((-t[2]<0?-e:e)+Y-z)%Y}function Qn(){var n=[],t;return{point:function(e,i,r){t.push([e,i,r])},lineStart:function(){n.push(t=[])},lineEnd:tn,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}function pn(n,t){return O(n[0]-t[0])<z&&O(n[1]-t[1])<z}function cn(n,t,e,i){this.x=n,this.z=t,this.o=e,this.e=i,this.v=!1,this.n=this.p=null}function Un(n,t,e,i,r){var a=[],c=[],f,g;if(n.forEach(function(h){if(!((m=h.length-1)<=0)){var m,S=h[0],N=h[m],d;if(pn(S,N)){if(!S[2]&&!N[2]){for(r.lineStart(),f=0;f<m;++f)r.point((S=h[f])[0],S[1]);r.lineEnd();return}N[0]+=2*z}a.push(d=new cn(S,h,null,!0)),c.push(d.o=new cn(S,null,d,!1)),a.push(d=new cn(N,h,null,!1)),c.push(d.o=new cn(N,null,d,!0))}}),!!a.length){for(c.sort(t),Hn(a),Hn(c),f=0,g=c.length;f<g;++f)c[f].e=e=!e;for(var v=a[0],o,u;;){for(var l=v,p=!0;l.v;)if((l=l.n)===v)return;o=l.z,r.lineStart();do{if(l.v=l.o.v=!0,l.e){if(p)for(f=0,g=o.length;f<g;++f)r.point((u=o[f])[0],u[1]);else i(l.x,l.n.x,1,r);l=l.n}else{if(p)for(o=l.p.z,f=o.length-1;f>=0;--f)r.point((u=o[f])[0],u[1]);else i(l.x,l.p.x,-1,r);l=l.p}l=l.o,o=l.z,p=!p}while(!l.v);r.lineEnd()}}}function Hn(n){if(t=n.length){for(var t,e=0,i=n[0],r;++e<t;)i.n=r=n[e],r.p=i,i=r;i.n=r=n[0],r.p=i}}function mn(n){return O(n[0])<=A?n[0]:St(n[0])*((O(n[0])+A)%Y-A)}function wt(n,t){var e=mn(t),i=t[1],r=F(i),a=[F(e),-B(e),0],c=0,f=0,g=new st;r===1?i=X+z:r===-1&&(i=-X-z);for(var v=0,o=n.length;v<o;++v)if(l=(u=n[v]).length)for(var u,l,p=u[l-1],h=mn(p),m=p[1]/2+zn,S=F(m),N=B(m),d=0;d<l;++d,h=E,S=P,N=x,p=y){var y=u[d],E=mn(y),M=y[1]/2+zn,P=F(M),x=B(M),I=E-h,C=I>=0?1:-1,T=C*I,w=T>A,H=S*P;if(g.add(rn(H*C*F(T),N*x+H*B(T))),c+=w?I+C*Y:I,w^h>=e^E>=e){var D=vn(Z(p),Z(y));wn(D);var L=vn(a,D);wn(L);var s=(w^I>=0?-1:1)*on(L[2]);(i>s||i===s&&(D[0]||D[1]))&&(f+=w^I>=0?1:-1)}}return(c<-z||c<z&&g<-ht)^f&1}function Zn(n,t,e,i){return function(r){var a=t(r),c=Qn(),f=t(c),g=!1,v,o,u,l={point:p,lineStart:m,lineEnd:S,polygonStart:function(){l.point=N,l.lineStart=d,l.lineEnd=y,o=[],v=[]},polygonEnd:function(){l.point=p,l.lineStart=m,l.lineEnd=S,o=Jn(o);var E=wt(v,i);o.length?(g||(r.polygonStart(),g=!0),Un(o,Nt,E,e,r)):E&&(g||(r.polygonStart(),g=!0),r.lineStart(),e(null,null,1,r),r.lineEnd()),g&&(r.polygonEnd(),g=!1),o=v=null},sphere:function(){r.polygonStart(),r.lineStart(),e(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function p(E,M){n(E,M)&&r.point(E,M)}function h(E,M){a.point(E,M)}function m(){l.point=h,a.lineStart()}function S(){l.point=p,a.lineEnd()}function N(E,M){u.push([E,M]),f.point(E,M)}function d(){f.lineStart(),u=[]}function y(){N(u[0][0],u[0][1]),f.lineEnd();var E=f.clean(),M=c.result(),P,x=M.length,I,C,T;if(u.pop(),v.push(u),u=null,!!x){if(E&1){if(C=M[0],(I=C.length-1)>0){for(g||(r.polygonStart(),g=!0),r.lineStart(),P=0;P<I;++P)r.point((T=C[P])[0],T[1]);r.lineEnd()}return}x>1&&E&2&&M.push(M.pop().concat(M.shift())),o.push(M.filter(Pt))}}return l}}function Pt(n){return n.length>1}function Nt(n,t){return((n=n.x)[0]<0?n[1]-X-z:X-n[1])-((t=t.x)[0]<0?t[1]-X-z:X-t[1])}const qn=Zn(function(){return!0},Rt,It,[-A,-X]);function Rt(n){var t=NaN,e=NaN,i=NaN,r;return{lineStart:function(){n.lineStart(),r=1},point:function(a,c){var f=a>0?A:-A,g=O(a-t);O(g-A)<z?(n.point(t,e=(e+c)/2>0?X:-X),n.point(i,e),n.lineEnd(),n.lineStart(),n.point(f,e),n.point(a,e),r=0):i!==f&&g>=A&&(O(t-i)<z&&(t-=i*z),O(a-f)<z&&(a-=f*z),e=At(t,e,a,c),n.point(i,e),n.lineEnd(),n.lineStart(),n.point(f,e),r=0),n.point(t=a,e=c),i=f},lineEnd:function(){n.lineEnd(),t=e=NaN},clean:function(){return 2-r}}}function At(n,t,e,i){var r,a,c=F(n-e);return O(c)>z?_n((F(t)*(a=B(i))*F(e)-F(i)*(r=B(t))*F(n))/(r*a*c)):(t+i)/2}function It(n,t,e,i){var r;if(n==null)r=e*X,i.point(-A,r),i.point(0,r),i.point(A,r),i.point(A,0),i.point(A,-r),i.point(0,-r),i.point(-A,-r),i.point(-A,0),i.point(-A,r);else if(O(n[0]-t[0])>z){var a=n[0]<t[0]?A:-A;r=e*a/2,i.point(-a,r),i.point(0,r),i.point(a,r)}else i.point(t[0],t[1])}function Ct(n){var t=B(n),e=2*G,i=t>0,r=O(t)>z;function a(o,u,l,p){Mt(p,n,e,l,o,u)}function c(o,u){return B(o)*B(u)>t}function f(o){var u,l,p,h,m;return{lineStart:function(){h=p=!1,m=1},point:function(S,N){var d=[S,N],y,E=c(S,N),M=i?E?0:v(S,N):E?v(S+(S<0?A:-A),N):0;if(!u&&(h=p=E)&&o.lineStart(),E!==p&&(y=g(u,d),(!y||pn(u,y)||pn(d,y))&&(d[2]=1)),E!==p)m=0,E?(o.lineStart(),y=g(d,u),o.point(y[0],y[1])):(y=g(u,d),o.point(y[0],y[1],2),o.lineEnd()),u=y;else if(r&&u&&i^E){var P;!(M&l)&&(P=g(d,u,!0))&&(m=0,i?(o.lineStart(),o.point(P[0][0],P[0][1]),o.point(P[1][0],P[1][1]),o.lineEnd()):(o.point(P[1][0],P[1][1]),o.lineEnd(),o.lineStart(),o.point(P[0][0],P[0][1],3)))}E&&(!u||!pn(u,d))&&o.point(d[0],d[1]),u=d,p=E,l=M},lineEnd:function(){p&&o.lineEnd(),u=null},clean:function(){return m|(h&&p)<<1}}}function g(o,u,l){var p=Z(o),h=Z(u),m=[1,0,0],S=vn(p,h),N=fn(S,S),d=S[0],y=N-d*d;if(!y)return!l&&o;var E=t*N/y,M=-t*d/y,P=vn(m,S),x=an(m,E),I=an(S,M);dn(x,I);var C=P,T=fn(x,C),w=fn(C,C),H=T*T-w*(fn(x,x)-1);if(!(H<0)){var D=En(H),L=an(C,(-T-D)/w);if(dn(L,x),L=Mn(L),!l)return L;var s=o[0],R=u[0],j=o[1],q=u[1],V;R<s&&(V=s,s=R,R=V);var b=R-s,J=O(b-A)<z,K=J||b<z;if(!J&&q<j&&(V=j,j=q,q=V),K?J?j+q>0^L[1]<(O(L[0]-s)<z?j:q):j<=L[1]&&L[1]<=q:b>A^(s<=L[0]&&L[0]<=R)){var _=an(C,(-T+D)/w);return dn(_,x),[L,Mn(_)]}}}function v(o,u){var l=i?n:A-n,p=0;return o<-l?p|=1:o>l&&(p|=2),u<-l?p|=4:u>l&&(p|=8),p}return Zn(c,f,a,i?[0,-n]:[-A,n-A])}function xt(n,t,e,i,r,a){var c=n[0],f=n[1],g=t[0],v=t[1],o=0,u=1,l=g-c,p=v-f,h;if(h=e-c,!(!l&&h>0)){if(h/=l,l<0){if(h<o)return;h<u&&(u=h)}else if(l>0){if(h>u)return;h>o&&(o=h)}if(h=r-c,!(!l&&h<0)){if(h/=l,l<0){if(h>u)return;h>o&&(o=h)}else if(l>0){if(h<o)return;h<u&&(u=h)}if(h=i-f,!(!p&&h>0)){if(h/=p,p<0){if(h<o)return;h<u&&(u=h)}else if(p>0){if(h>u)return;h>o&&(o=h)}if(h=a-f,!(!p&&h<0)){if(h/=p,p<0){if(h>u)return;h>o&&(o=h)}else if(p>0){if(h<o)return;h<u&&(u=h)}return o>0&&(n[0]=c+o*l,n[1]=f+o*p),u<1&&(t[0]=c+u*l,t[1]=f+u*p),!0}}}}}var en=1e9,sn=-en;function Lt(n,t,e,i){function r(v,o){return n<=v&&v<=e&&t<=o&&o<=i}function a(v,o,u,l){var p=0,h=0;if(v==null||(p=c(v,u))!==(h=c(o,u))||g(v,o)<0^u>0)do l.point(p===0||p===3?n:e,p>1?i:t);while((p=(p+u+4)%4)!==h);else l.point(o[0],o[1])}function c(v,o){return O(v[0]-n)<z?o>0?0:3:O(v[0]-e)<z?o>0?2:1:O(v[1]-t)<z?o>0?1:0:o>0?3:2}function f(v,o){return g(v.x,o.x)}function g(v,o){var u=c(v,1),l=c(o,1);return u!==l?u-l:u===0?o[1]-v[1]:u===1?v[0]-o[0]:u===2?v[1]-o[1]:o[0]-v[0]}return function(v){var o=v,u=Qn(),l,p,h,m,S,N,d,y,E,M,P,x={point:I,lineStart:H,lineEnd:D,polygonStart:T,polygonEnd:w};function I(s,R){r(s,R)&&o.point(s,R)}function C(){for(var s=0,R=0,j=p.length;R<j;++R)for(var q=p[R],V=1,b=q.length,J=q[0],K,_,ln=J[0],Q=J[1];V<b;++V)K=ln,_=Q,J=q[V],ln=J[0],Q=J[1],_<=i?Q>i&&(ln-K)*(i-_)>(Q-_)*(n-K)&&++s:Q<=i&&(ln-K)*(i-_)<(Q-_)*(n-K)&&--s;return s}function T(){o=u,l=[],p=[],P=!0}function w(){var s=C(),R=P&&s,j=(l=Jn(l)).length;(R||j)&&(v.polygonStart(),R&&(v.lineStart(),a(null,null,1,v),v.lineEnd()),j&&Un(l,f,s,a,v),v.polygonEnd()),o=v,l=p=h=null}function H(){x.point=L,p&&p.push(h=[]),M=!0,E=!1,d=y=NaN}function D(){l&&(L(m,S),N&&E&&u.rejoin(),l.push(u.result())),x.point=I,E&&o.lineEnd()}function L(s,R){var j=r(s,R);if(p&&h.push([s,R]),M)m=s,S=R,N=j,M=!1,j&&(o.lineStart(),o.point(s,R));else if(j&&E)o.point(s,R);else{var q=[d=Math.max(sn,Math.min(en,d)),y=Math.max(sn,Math.min(en,y))],V=[s=Math.max(sn,Math.min(en,s)),R=Math.max(sn,Math.min(en,R))];xt(q,V,n,t,e,i)?(E||(o.lineStart(),o.point(q[0],q[1])),o.point(V[0],V[1]),j||o.lineEnd(),P=!1):j&&(o.lineStart(),o.point(s,R),P=!1)}d=s,y=R,E=j}return x}}const Wn=n=>n;var k=1/0,gn=k,un=-k,Sn=un,zt={point:Tt,lineStart:tn,lineEnd:tn,polygonStart:tn,polygonEnd:tn,result:function(){var n=[[k,gn],[un,Sn]];return un=Sn=-(gn=k=1/0),n}};function Tt(n,t){n<k&&(k=n),n>un&&(un=n),t<gn&&(gn=t),t>Sn&&(Sn=t)}const Xn=zt;function An(n){return function(t){var e=new Rn;for(var i in n)e[i]=n[i];return e.stream=t,e}}function Rn(){}Rn.prototype={constructor:Rn,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function In(n,t,e){var i=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),i!=null&&n.clipExtent(null),mt(e,n.stream(Xn)),t(Xn.result()),i!=null&&n.clipExtent(i),n}function kn(n,t,e){return In(n,function(i){var r=t[1][0]-t[0][0],a=t[1][1]-t[0][1],c=Math.min(r/(i[1][0]-i[0][0]),a/(i[1][1]-i[0][1])),f=+t[0][0]+(r-c*(i[1][0]+i[0][0]))/2,g=+t[0][1]+(a-c*(i[1][1]+i[0][1]))/2;n.scale(150*c).translate([f,g])},e)}function Ot(n,t,e){return kn(n,[[0,0],t],e)}function Dt(n,t,e){return In(n,function(i){var r=+t,a=r/(i[1][0]-i[0][0]),c=(r-a*(i[1][0]+i[0][0]))/2,f=-a*i[0][1];n.scale(150*a).translate([c,f])},e)}function Bt(n,t,e){return In(n,function(i){var r=+t,a=r/(i[1][1]-i[0][1]),c=-a*i[0][0],f=(r-a*(i[1][1]+i[0][1]))/2;n.scale(150*a).translate([c,f])},e)}var $n=16,Ft=B(30*G);function Vn(n,t){return+t?jt(n,t):Gt(n)}function Gt(n){return An({point:function(t,e){t=n(t,e),this.stream.point(t[0],t[1])}})}function jt(n,t){function e(i,r,a,c,f,g,v,o,u,l,p,h,m,S){var N=v-i,d=o-r,y=N*N+d*d;if(y>4*t&&m--){var E=c+l,M=f+p,P=g+h,x=En(E*E+M*M+P*P),I=on(P/=x),C=O(O(P)-1)<z||O(a-u)<z?(a+u)/2:rn(M,E),T=n(C,I),w=T[0],H=T[1],D=w-i,L=H-r,s=d*D-N*L;(s*s/y>t||O((N*D+d*L)/y-.5)>.3||c*l+f*p+g*h<Ft)&&(e(i,r,a,c,f,g,w,H,C,E/=x,M/=x,P,m,S),S.point(w,H),e(w,H,C,E,M,P,v,o,u,l,p,h,m,S))}}return function(i){var r,a,c,f,g,v,o,u,l,p,h,m,S={point:N,lineStart:d,lineEnd:E,polygonStart:function(){i.polygonStart(),S.lineStart=M},polygonEnd:function(){i.polygonEnd(),S.lineStart=d}};function N(I,C){I=n(I,C),i.point(I[0],I[1])}function d(){u=NaN,S.point=y,i.lineStart()}function y(I,C){var T=Z([I,C]),w=n(I,C);e(u,l,o,p,h,m,u=w[0],l=w[1],o=I,p=T[0],h=T[1],m=T[2],$n,i),i.point(u,l)}function E(){S.point=N,i.lineEnd()}function M(){d(),S.point=P,S.lineEnd=x}function P(I,C){y(r=I,C),a=u,c=l,f=p,g=h,v=m,S.point=y}function x(){e(u,l,o,p,h,m,a,c,r,f,g,v,$n,i),S.lineEnd=E,E()}return S}}var Ht=An({point:function(n,t){this.stream.point(n*G,t*G)}});function qt(n){return An({point:function(t,e){var i=n(t,e);return this.stream.point(i[0],i[1])}})}function Wt(n,t,e,i,r){function a(c,f){return c*=i,f*=r,[t+n*c,e-n*f]}return a.invert=function(c,f){return[(c-t)/n*i,(e-f)/n*r]},a}function Yn(n,t,e,i,r,a){if(!a)return Wt(n,t,e,i,r);var c=B(a),f=F(a),g=c*n,v=f*n,o=c/n,u=f/n,l=(f*e-c*t)/n,p=(f*t+c*e)/n;function h(m,S){return m*=i,S*=r,[g*m-v*S+t,e-v*m-g*S]}return h.invert=function(m,S){return[i*(o*m-u*S+l),r*(p-u*m-o*S)]},h}function Xt(n){return $t(function(){return n})()}function $t(n){var t,e=150,i=480,r=250,a=0,c=0,f=0,g=0,v=0,o,u=0,l=1,p=1,h=null,m=qn,S=null,N,d,y,E=Wn,M=.5,P,x,I,C,T;function w(s){return I(s[0]*G,s[1]*G)}function H(s){return s=I.invert(s[0],s[1]),s&&[s[0]*$,s[1]*$]}w.stream=function(s){return C&&T===s?C:C=Ht(qt(o)(m(P(E(T=s)))))},w.preclip=function(s){return arguments.length?(m=s,h=void 0,L()):m},w.postclip=function(s){return arguments.length?(E=s,S=N=d=y=null,L()):E},w.clipAngle=function(s){return arguments.length?(m=+s?Ct(h=s*G):(h=null,qn),L()):h*$},w.clipExtent=function(s){return arguments.length?(E=s==null?(S=N=d=y=null,Wn):Lt(S=+s[0][0],N=+s[0][1],d=+s[1][0],y=+s[1][1]),L()):S==null?null:[[S,N],[d,y]]},w.scale=function(s){return arguments.length?(e=+s,D()):e},w.translate=function(s){return arguments.length?(i=+s[0],r=+s[1],D()):[i,r]},w.center=function(s){return arguments.length?(a=s[0]%360*G,c=s[1]%360*G,D()):[a*$,c*$]},w.rotate=function(s){return arguments.length?(f=s[0]%360*G,g=s[1]%360*G,v=s.length>2?s[2]%360*G:0,D()):[f*$,g*$,v*$]},w.angle=function(s){return arguments.length?(u=s%360*G,D()):u*$},w.reflectX=function(s){return arguments.length?(l=s?-1:1,D()):l<0},w.reflectY=function(s){return arguments.length?(p=s?-1:1,D()):p<0},w.precision=function(s){return arguments.length?(P=Vn(x,M=s*s),L()):En(M)},w.fitExtent=function(s,R){return kn(w,s,R)},w.fitSize=function(s,R){return Ot(w,s,R)},w.fitWidth=function(s,R){return Dt(w,s,R)},w.fitHeight=function(s,R){return Bt(w,s,R)};function D(){var s=Yn(e,0,0,l,p,u).apply(null,t(a,c)),R=Yn(e,i-s[0],r-s[1],l,p,u);return o=Kn(f,g,v),x=Pn(t,R),I=Pn(o,x),P=Vn(x,M),L()}function L(){return C=T=null,w}return function(){return t=n.apply(this,arguments),w.invert=t.invert&&H,D()}}function Cn(n,t){return[n,gt(Et((X+t)/2))]}Cn.invert=function(n,t){return[n,2*_n(vt(t))-X]};function Vt(){return Yt(Cn).scale(961/Y)}function Yt(n){var t=Xt(n),e=t.center,i=t.scale,r=t.translate,a=t.clipExtent,c=null,f,g,v;t.scale=function(u){return arguments.length?(i(u),o()):i()},t.translate=function(u){return arguments.length?(r(u),o()):r()},t.center=function(u){return arguments.length?(e(u),o()):e()},t.clipExtent=function(u){return arguments.length?(u==null?c=f=g=v=null:(c=+u[0][0],f=+u[0][1],g=+u[1][0],v=+u[1][1]),o()):c==null?null:[[c,f],[g,v]]};function o(){var u=A*i(),l=t(yt(t.rotate()).invert([0,0]));return a(c==null?[[l[0]-u,l[1]-u],[l[0]+u,l[1]+u]]:n===Cn?[[Math.max(l[0]-u,c),f],[Math.min(l[0]+u,g),v]]:[[c,Math.max(l[1]-u,f)],[g,Math.min(l[1]+u,v)]])}return o()}function Jt(n){return{all:n=n||new Map,on:function(t,e){var i=n.get(t);i?i.push(e):n.set(t,[e])},off:function(t,e){var i=n.get(t);i&&(e?i.splice(i.indexOf(e)>>>0,1):n.set(t,[]))},emit:function(t,e){var i=n.get(t);i&&i.slice().map(function(r){r(e)}),(i=n.get("*"))&&i.slice().map(function(r){r(t,e)})}}}const U=Jt(),_t=nn.forwardRef((n,t)=>{const{features:e}=n,i=Vt().center([104,37]).scale(9).translate([0,0]),r=f=>{f.object.material[0].color=new xn("#ff0"),U.emit("handleShow",f)},a=f=>{f.object.material[0].color=new xn("#f00"),U.emit("handleCancel")},c=e.map(f=>{const g=f.properties.center!=null;let v=null;if(g){const[u,l]=i(f.properties.center);v={name:f.properties.name,position:[u,-l]}}let o;return f.geometry.type==="Polygon"?o=[f.geometry.coordinates]:o=f.geometry.coordinates,o.map((u,l)=>{const p=new it,h=[];u.map(d=>{d.map((y,E)=>{const[M,P]=i(y);h.push(new et(M,-P,.01)),E?p.lineTo(M,-P):p.moveTo(M,-P)})});const m=new rt().setFromPoints(h),S=new ot({color:"#fff"}),N=new ut(m,S);return W.jsxs("group",{children:[W.jsx("primitive",{object:N}),W.jsxs("mesh",{userData:g&&{center:v},name:f.properties.name,onPointerOut:a,onPointerEnter:r,children:[W.jsx("extrudeGeometry",{args:[p,{depth:-.1,bevelEnabled:!1}]}),W.jsx("meshBasicMaterial",{attach:"material-1",color:"#d13a00",transparent:!0,opacity:.5}),W.jsx("meshBasicMaterial",{attach:"material-0",transparent:!0,color:"#f00",opacity:.9})]})]},l)})});return W.jsx("group",{position:[0,0,0],ref:t,children:c})}),bt=()=>{const n=bn(lt,"/china.json"),t=JSON.parse(n).features,[e,i]=nn.useState(""),[r,a]=nn.useState({x:0,y:0}),c=nn.useRef();return nn.useEffect(()=>(U.on("handleShow",f=>{i(f.object.name),a({x:f.offsetX,y:f.offsetY})}),U.on("handleCancel",()=>{i("")}),()=>{U.off("handleShow"),U.off("handleCancel")}),[c.current]),W.jsxs("div",{id:Ln.map,className:"bg-gradient-to-b from-gray-500 to-slate-100",children:[W.jsx("div",{id:Ln.tooltip,style:{left:r.x,top:r.y},children:e}),W.jsxs(nt,{children:[W.jsx(ft,{fov:60,near:1,far:100,aspect:window.innerWidth/window.innerHeight,position:[0,0,100]}),W.jsx(tt,{minDistance:1,maxDistance:10,minPolarAngle:Math.PI/4,maxPolarAngle:Math.PI/2,minAzimuthAngle:-Math.PI/4,maxAzimuthAngle:Math.PI/4}),W.jsx("ambientLight",{intensity:1,args:["#dedede"]}),W.jsx(_t,{ref:c,features:t})]})]})};export{bt as default};
